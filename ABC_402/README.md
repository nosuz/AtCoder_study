## 開催日

2025 年 4 月 19 日

## コンテストページ

[東京海上日動プログラミングコンテスト 2025（AtCoder Beginner Contest 402）](https://atcoder.jp/contests/abc402)

## C - Dislike Foods

最後に食べられる料理＝最後まで食べられない料理。そこで食べられない食材を含む料理を後ろから順番にたどる。

### よりスマートな方法

[X](https://x.com/june19312/status/1914148087905587212)で紹介されていた食材を克服できる日に変換する方法が面白い。

料理に使われている食材のリストから、直接何日目に食べられるようになるかを計算しておく。

このアイデアを使うと、`C_alt.py`のように

1. 克服する順番が得られたら、食材から克服する日の変換表を作る。
2. 変換表で料理の食材を克服できる日に変換して、その最大値を料理を食べられるようになる日とする。
3. 食べられるようになった日の料理数の表を更新する。
4. 結果は、それまでに食べられるようになっている数をカウントする。

と料理の食材リストを 1 回スキャンするだけで答えが出る。また実行速度も`C.py`よりも速い。Set()の OR 操作に時間がかかっているのか？

## D - Line Crossing

三角関数を使って xy 座標を計算し、そこから傾きを考える。この場合、dx が 0 すなわち y=0 の直線になる場合や計算誤差により正しく直線を分類できない。

そこで直線を移動してどの頂点に接するかで分類する。このとき、反対側に位置する頂点 2 つは交差しない直線なのに別のグループに分類されてしまう。これを避けるために、mod を使って頂点のグループを半分にする。

同様のアイデアで、頂点１を通るように直線を移動させて(x, 1)または(1, x)で分類するというアイデアも見かけた。
